<title>can.List.filter()</title>

<div id="demo"></div>

<script id="main-template" type="text/stache">
<table>
    {{#each lists}}
        <tr>
            <td>{{label}}:</td>
            <td class="circles">
                {{#each numbers}}
                    <div class="circle" style="background-color: {{hex}}">{{number}}</div>
                {{/each}}
            </td>
        </tr>
    {{/each}}
</table>
</script>

<script src="../../node_modules/steal/steal.js"></script>
<script src="./random-color.js"></script>
<script type="text/javascript">
steal('can', 'can/view/stache', 'list', function () {
    var NUMBER_OF_DICE = 540;
    var numbers = new can.List();
    var generateRandomNumber = function () { return Math.ceil(Math.random() * 99); }

    for (var i = 0; i < NUMBER_OF_DICE; i++) {
        var hex = randomColor({
           luminosity: 'dark',
           hue: 'random'
        });

        numbers.push({
            hex: hex,
            number: generateRandomNumber()
            // number: i
        });
    }

    // setTimeout(function () {
    //     numbers.attr(2).attr('number', 3);
    // }, 1000);

    setInterval(function () {
        if (i >= NUMBER_OF_DICE) {
            i = 0;
        }

        numbers.attr(i).attr('number', generateRandomNumber());

        i++;
    }, 0);


    $('#demo').append(can.view('main-template', { lists: [
        {
            label: 'Source',
            numbers: numbers
        },
        {
            label: 'Even',
            numbers: numbers.filter(function (number) {
                return number.attr('number') % 2 === 0;
            })
        },
        {
            label: 'Odd',
            numbers: numbers.filter(function (number) {
                return number.attr('number') % 2 !== 0;
            })
        },
        {
            label: '< 50',
            numbers: numbers.filter(function (number) {
                return number.attr('number') <= 50;
            })
        },
        {
            label: '> 50',
            numbers: numbers.filter(function (number) {
                return number.attr('number') >= 50;
            })
        }
    ]}));

});
</script>

<style type="text/css">
html {
    font-family: sans-serif;
    font-size: 12px;
}
table, tbody, th, tr, td {
    border-spacing: 0;
    border-collapse: collapse;
    font-size: 1em;
}
td {
    vertical-align: top;
    line-height: 30px;
}

td:first-child {
    width: 50px;
    font-weight: bold;
}
td:last-child {
    padding-bottom: 10px;
}
.circle {
    float: left;
    width: 30px;
    height: 30px;
    margin: 0 2px 1px;
    text-align: center;
    line-height: 30px;
    border-radius: 50%;
    color: #fff;
    background-color: #eee;
}
</style>